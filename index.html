<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
    <style>
        .wrap{
            width:80%;
            margin:0 auto;
            font-size:1em;
            background-color: #bd485e;
            padding:15px 20px;
            color:#fff;
        }
        .FormPart{
            margin:15px 0;
        }
        input[type="radio"],input[type="checkbox"]{
            width:25px;
            height:25px;
            vertical-align: middle;
            margin:0 3px;

        }
        input[type="radio"]~label{
            line-height:2em;
            letter-spacing: 0.5em;
        }
        input[type="text"]{
            height:40px;
            outline:none;
            display:block;
            width: 95%;
            font-size:20px;
            color:#333;
            margin:2px 0 10px;
            border:2px solid #fff;
        }
        input[type="date"]{
            display:inline-block;
            height:40px;
        }
        button{
            height: 50px;
            padding:10px 30px;
            border:2px solid #fff;
            background-color: #32af84;
            color:white;
        }
        #buttons{
            position:relative;
        }
        button#copy{
            background-color: #f18933;
            position:absolute;
            right:0;
            top:0;
        }
        #forPickup{
            display:none;
        }
        #bottomMsg{
            margin-top:20px;
            line-height:1.5em;
        }
        #p_undef,#d_undef{
            font-weight:bold;
            color:yellow;
            font-size:1.2em;
            letter-spacing: 2px;
            margin-left:15px;
        }

        #clearBtn{
            position:absolute;
            right:20%;
            top:20px;
            background-color: #aaa;
        }
    </style>
</head>
<body>
<section class="wrap">

    <section class = "topForm">
        <div class="FormPart">
            <input id="types_d" type="radio" name="types" value="delivery" checked>
            <label for="types_d">é€è²¨</label>

            <input id="types_p" type="radio" name="types" value="pickup" >
            <label for="types_p">è‡ªå–</label>

        </div>
        <form action="/" id="theForm">
        <div class="FormPart">

            <button id="clearBtn" type="button" onclick="clearForm();">Clear</button>
            <label for="customer">å®¢æˆ¶åç¨±:</label>
            <input type="text" id="customer" placeholder="å®¢æˆ¶åç¨±">

            <label for="orderNo">å–®No.:</label>
            <input type="text" id="orderNo" placeholder="è¨‚å–®No.">

            <label for="phone">é›»è©±:</label>
            <input type="text" id="phone" placeholder="é›»è©±">

            <div id="forDelivery">
                <label for="d_date">é€è²¨æ—¥æœŸ:</label>
                <input type="date" id="d_date">
                <br>

                <input id="d_noon" type="radio" name="d_time" value="0">
                <label for="d_noon" >åˆé€</label>

                <input id="d_night" type="radio" name="d_time" value="1">
                <label for="d_night">æ™šé€</label>

                <input id="d_jp" type="radio" name="d_time" value="2">
                <label for="d_jp">JPé€</label>
                <div id="d_undef">æœªé¸æ™‚é–“æ®µï¼</div>
            </div>

            <div id="forPickup">
                <label for="p_date">è‡ªå–æ—¥æœŸ:</label>
                <input type="date" id="p_date">
                <span id="p_undef">æœªæä¾›ï¼</span>
            </div>
        </div>
        <div id="buttons">
            <button type="button" id="whatsapp" onclick="sendWhatsApp();">Send Whatsapp</button>
            <button type="button" id="copy" onclick="copyMsg();">Copy Msg</button>
        </div>
        </form>
    </section>
    <section id="bottomMsg">

    </section>

</section>


<script src="jquery-3.6.0.min.js"></script>
<script>
    $(function(){
        changeDandP();
        // åˆ‡æ›é€è²¨è‡ªå–
        $("input[name='types']").change(function(){
            changeDandP();
        })
        setDefault();

    })
    function setDefault(){
        // è¨­ç½®é€è²¨è‡ªå–minæ—¥æœŸç‚ºä»Šå¤©
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0 so need to add 1 to make it 1!
        var yyyy = today.getFullYear();
        if(dd<10){
            dd='0'+dd
        }
        if(mm<10){
            mm='0'+mm
        }

        today = yyyy+'-'+mm+'-'+dd;
        $("input[type='date']").attr("min", today);
        $("#d_date").val(today);escape

        //    è¨­ç½®è‡ªå–â€œæœªæä¾›"
        $("#p_date").change(function(){
            if($("#p_date").val()==""){
                $("#p_undef").show();
            }else{
                $("#p_undef").hide();

            }
        })
        //è¨­ç½®é€è²¨â€œæœªé¸æ“‡æ™‚é–“â€
        if($("input[name='d_time']:checked").val()){
            $("#d_undef").hide();
        }else{
            $("#d_undef").show();
        }
        $("input[name='d_time']").change(function(){
            $("#d_undef").hide();
        })
    }
    function clearForm(){
        $("#theForm")[0].reset();
        changeDandP();
        setDefault();

    }
    function changeDandP(){
        if($("input[name='types']:checked").val()=="delivery"){
            $("#forDelivery").show();
            $("#forPickup").hide();
        }else{
            $("#forDelivery").hide();
            $("#forPickup").show();
        }
    }
    function copyMsg() {
        var types = $("input[name='types']:checked").val();
        var customer = $("#customer").val();
        var orderNo = $("#orderNo").val();
        var phone = $("#phone").val();
        // æ—¥æœŸå– æ—¥/æœˆ
        var d_date = new Date($("#d_date").val()).getDate()+"/"+(new Date($("#d_date").val()).getMonth()+1);
        // è½‰æ›æ˜ŸæœŸå¹¾
        var weekday = ["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"];
        var d_day = weekday[new Date($("#d_date").val()).getDay()];
        var d_today="";
        switch((new Date($("#d_date").val()).setHours(0,0,0,0) - new Date().setHours(0,0,0,0))/1000 / 60 / 60 / 24){
            case 0:d_today = "ä»Šå¤©"; break;
            case 1:d_today = "æ˜å¤©"; break;
            case 2:d_today = "å¾Œå¤©"; break;
            default: d_today="";
        }
        // è½‰æ›æ™‚é–“æ®µ
        var d_timePeriod = ["3-6","7-10","5-9"];
        var d_time = $("input[name='d_time']:checked").val()?d_timePeriod[$("input[name='d_time']:checked").val()]:"";
        var p_date = new Date($("#p_date").val()).getDate()+"/"+(new Date($("#p_date").val()).getMonth()+1);
        var p_day = weekday[new Date($("#p_date").val()).getDay()]

        var msg = "";
        /*é€è²¨*/
        if (types == "delivery") {

            msg = `Dear ${customer}æ‚¨å¥½ï¼Œæˆ‘æ˜¯åŒé †èˆˆAnnaã€‚æˆ‘å€‘å·²ç¶“æ”¶åˆ°æ‚¨çš„ç¶²ç«™ï½›#${orderNo}å·²å®Œæˆä»˜æ¬¾ï½é€è²¨ä¸Šé–€è¨‚å–®ï¼Œæˆ‘å€‘æœƒå®‰æ’æ‚¨çš„è¨‚å–®æ–¼:
ğŸ“¦ğŸ“¦ ${d_today} ${d_date} ${d_day} ä¸‹åˆ${d_time}æ™‚é€è²¨ğŸ“¦ğŸ“¦
å¯¦éš›åˆ°é”æ™‚é–“æ ¹æ“šç•¶å¤©é€è²¨è·¯ç·šæœ‰å¯èƒ½æå‰æˆ–å»¶å¾Œï¼Œè«‹è¦‹è«’ğŸ™‡ğŸ¼â€â™€ï¸åˆ°é”å‰æˆ‘å€‘æœƒé›»è©±è¯çµ¡æ‚¨ğŸ˜Š è«‹æ³¨æ„æ¥è½é›»è©± ğŸ“ğŸ“
æ„Ÿè¬æ‚¨çš„æ”¯æŒï¼Œå¦‚æœ‰ä»»ä½•å•é¡Œï¼Œæ­¡è¿è¯çµ¡æˆ‘ã€‚

æ”¶åˆ°è²¨å¾Œå‡å“è«‹åŠæ™‚å­˜æ”¾å†°ç®±ï¼Œé£Ÿå“ä¿å­˜æ–¹æ³•å¯åƒé–±å¸¸è¦‹å•é¡Œï¼šhttps://www.tshfoodhk.com/faq/

å› è¿‘æ—¥ç–«æƒ…åš´å³»ï¼Œç‚ºä¿éšœå¤§å®¶å®‰å…¨ï¼Œé€è²¨æœå‹™å°‡åœ¨æ¨“ä¸‹å¤§å ‚é€²è¡Œäº¤æ”¶æˆ–ç›´æ¥æ”¾ç®¡ç†è™•ä»£æ”¶ï¼Œæ•¬è«‹ç†è§£é…åˆğŸ™‡ğŸ¼â€â™€ï¸ğŸ™‡ğŸ¼â€â™€ï¸`;

        }

        /*è‡ªå–*/
        else if(types == "pickup"){
            var p_msg = ""

            if($("#p_date").val()==""){
                p_msg = `*è‡ªå–æ™‚é–“æœªæä¾›ï¼Œ è«‹æä¾›è‡ªå–æ™‚é–“ä»¥ä¾¿æˆ‘å€‘æå‰æº–å‚™å¥½æ‚¨çš„è¨‚å–®* `
                $("#p_undef").show();
            }else{
                p_msg = `è‡ªå–æ™‚é–“:${p_day} ${p_date} `

            }
            msg = `Dear ${customer}æ‚¨å¥½ï¼Œæˆ‘æ˜¯åŒé †èˆˆAnnaã€‚æˆ‘å€‘å·²ç¶“æ”¶åˆ°æ‚¨çš„ç¶²ç«™ï½›#${orderNo}å·²å®Œæˆä»˜æ¬¾ï½åˆ°åº—è‡ªå–è¨‚å–®ï¼Œ${p_msg}ï¼Œæ„Ÿè¬æ‚¨çš„æ”¯æŒï¼Œå¦‚æœ‰ä»»ä½•å•é¡Œï¼Œæ­¡è¿è¯çµ¡æˆ‘ã€‚

ğŸ›è‡ªå–æµç¨‹ï¼š
åˆ°æ”¶éŠ€è™•å ±ä¸Šæ‚¨çš„è¨‚å–®ç·¨è™Ÿ{#${orderNo}}å³å¯ï¼Œæˆ‘å€‘æœƒæå‰ç‚ºæ‚¨æº–å‚™å¥½æ‚¨çš„å•†å“ã€‚
ğŸ“è‡ªå–åœ°å€ï¼š
é¦™æ¸¯è¥¿ç‡Ÿç›¤å¹²è«¾é“è¥¿68è™Ÿåœ°ä¸‹ï¼ˆä¸­éŠ€ä¿¡ç”¨å¡ä¸­å¿ƒéš”é›¢)
åœ°éµè¥¿ç‡Ÿç›¤ç«™A2å‡ºå£/ä¸Šç’°ç«™Cå‡ºå£,æ­¥è¡Œ5åˆ†é˜
â°è‡ªå–æ™‚é–“ï¼š
æ˜ŸæœŸä¸€è‡³å…­ : 10AM- 6PM
(æ˜ŸæœŸæ—¥åŠå…¬çœ¾å‡æœŸä¼‘æ¯)`

        }
        $("#bottomMsg").html(msg);
        navigator.clipboard.writeText(msg);
        return msg;
    }

    function sendWhatsApp(){
        var copymsg = copyMsg();
        console.log(copymsg);
        var phone = $("#phone").val();
        navigator.clipboard.writeText(copymsg).then(function(){
//             window.open("https://api.whatsapp.com/send?phone=852"+phone);
            window.open("whatsapp://send?phone=852"+phone);
        });

    }


</script>
</body>
</html>
